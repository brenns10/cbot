
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Administering CBot &#8212; cbot 0.10.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="dev.html" />
    <link rel="prev" title="Users" href="User.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="administering-cbot">
<h1>Administering CBot<a class="headerlink" href="#administering-cbot" title="Permalink to this heading">¶</a></h1>
<section id="installing-distribution-packages">
<h2>Installing (Distribution Packages)<a class="headerlink" href="#installing-distribution-packages" title="Permalink to this heading">¶</a></h2>
<p>CBot has source releases on <a class="reference external" href="https://github.com/brenns10/cbot">Github</a> as well
as binary package releases for Alpine Linux. You can install the Alpine packages
with <code class="docutils literal notranslate"><span class="pre">apk</span> <span class="pre">add</span> <span class="pre">--allow-untrusted</span> <span class="pre">&lt;file&gt;</span></code>. For other Linux distributions, you’ll
need to install from source.</p>
</section>
<section id="installing-docker">
<h2>Installing (Docker)<a class="headerlink" href="#installing-docker" title="Permalink to this heading">¶</a></h2>
<p>CBot also has Docker images published on <a class="reference external" href="https://hub.docker.com/r/brenns10/cbot">Docker Hub</a>. Since version v0.8.0, these Docker
images no longer contain Signald bundled. If you want to run CBot with Signal,
you’ll need to setup Signald yourself, likely via their Docker image.
Docker-Compose is great for this.</p>
</section>
<section id="installing-from-source">
<h2>Installing (From Source)<a class="headerlink" href="#installing-from-source" title="Permalink to this heading">¶</a></h2>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading">¶</a></h3>
<p>First, you’ll need to unpack your source release (or checkout a git revision of
interest). Next, setup your dependencies. The following are dependencies of
CBot.</p>
<ul class="simple">
<li><p>meson: this is the build system for CBot, it is required (usually a package
named <code class="docutils literal notranslate"><span class="pre">meson</span></code>)</p></li>
<li><p>A C compiler (gcc or clang)</p></li>
<li><p>libconfig: This is used to parse the configuration file. It is required.</p></li>
<li><p>libcurl: For HTTP queries to APIs. It is required.</p></li>
<li><p>libmicrohttpd: For HTTP server. It is required</p></li>
<li><p>libircclient: This is for IRC support. It is required, but we can use a
“vendored” version if your OS doesn’t package it.</p></li>
<li><p>sqlite3: Used for maintaining state. It is required, but we can use a vendored
version as necessary.</p></li>
<li><p>Several libraries from <a class="reference external" href="https://sr.ht/~brenns10/sc-libs/">sc-libs</a>, these
can all be setup by the build system, as they have no OS packaging.</p></li>
</ul>
<p>Here are some commands to get setup for various distributions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ubuntu</span>
sudo apt install meson gcc libconfig-dev libcurl4-openssl-dev libsqlite3-dev libmicrohttpd-dev

<span class="c1"># Arch</span>
sudo pacman -Sy meson gcc libconfig curl sqlite libmicrohttpd
</pre></div>
</div>
</section>
<section id="building">
<h3>Building<a class="headerlink" href="#building" title="Permalink to this heading">¶</a></h3>
<p>Once you have setup the dependencies, you’ll need to build the project:</p>
<p>This project uses the Meson build system. The following commands will build the
project:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># creates a build directory named &quot;build&quot;</span>
meson build
<span class="c1"># change to &quot;build&quot; and compile everything</span>
ninja -C build
</pre></div>
</div>
<p>During the <code class="docutils literal notranslate"><span class="pre">meson</span> <span class="pre">build</span></code> step, the build system will download any dependencies
that it cannot find installed on your system, including all of the sc-libs
dependencies.</p>
<p>During <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">-C</span> <span class="pre">build</span></code>, the actual program compilation happens. It should be
snappy.</p>
</section>
<section id="initial-run">
<h3>Initial Run<a class="headerlink" href="#initial-run" title="Permalink to this heading">¶</a></h3>
<p>To test your built program, you can use <code class="docutils literal notranslate"><span class="pre">sample.cfg</span></code>, which sets up some
plugins in the CLI. Simply run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>build/cbot sample.cfg
</pre></div>
</div>
</section>
</section>
<section id="configuring">
<h2>Configuring<a class="headerlink" href="#configuring" title="Permalink to this heading">¶</a></h2>
<p>A sample configuration file is bundled as <code class="docutils literal notranslate"><span class="pre">sample.cfg</span></code>. This should be used as
the basis for your configuration. However, there are some very important things
which ought to be documented.</p>
<section id="choosing-configuring-backend">
<h3>Choosing &amp; Configuring Backend<a class="headerlink" href="#choosing-configuring-backend" title="Permalink to this heading">¶</a></h3>
<p>In the <code class="docutils literal notranslate"><span class="pre">cbot</span></code> configuration object, you should find an option <code class="docutils literal notranslate"><span class="pre">backend</span></code>.
This is required, and you can choose between:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;irc&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;signal&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;cli&quot;</span></code></p></li>
</ul>
<p>Whichever backend you choose, you must also have a corresponding top-level
configuration object with the same name. This object provides necessary config
for the backend.</p>
<p>For the irc backend, you need to configure:</p>
<ul class="simple">
<li><p>host: string hostname (use “#” prefix for SSL)</p></li>
<li><p>port: integer port</p></li>
<li><p>password: string password</p></li>
</ul>
<p>For the signal backend, you must run an instance of <a class="reference external" href="https://signald.org/">Signald</a>. The following configuration is avaialable:</p>
<ul class="simple">
<li><p>phone: phone number of bot account</p></li>
<li><p>signald_socket: filename to connect to Signald</p></li>
<li><p>auth: authorized phone number of privileged account</p></li>
<li><p>ignore_dm: should the bot ignore DMs?</p></li>
</ul>
</section>
<section id="configuring-cbot">
<h3>Configuring CBot<a class="headerlink" href="#configuring-cbot" title="Permalink to this heading">¶</a></h3>
<p>Beyond the backend configuration, the <code class="docutils literal notranslate"><span class="pre">plugins</span></code> top-level configuration option
specifies each plugin which is loaded. Each plugin named in this mapping will be
loaded. The plugin can be mapped to an empty config dict for plugins with no
options, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">:</span> <span class="p">{};</span>
</pre></div>
</div>
<p>If the plugin requires configuration, it can be provided in these objects.
Please see <code class="docutils literal notranslate"><span class="pre">sample.cfg</span></code> for examples of each plugin’s configuration.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">cbot</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="User.html">Users</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Administering CBot</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-distribution-packages">Installing (Distribution Packages)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-docker">Installing (Docker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-from-source">Installing (From Source)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring">Configuring</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev.html">Development</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="User.html" title="previous chapter">Users</a></li>
      <li>Next: <a href="dev.html" title="next chapter">Development</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021 Stephen Brennan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/admin.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>